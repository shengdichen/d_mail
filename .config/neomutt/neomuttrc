# box {{{
source "~/.config/neomutt/box/notmuch"

source "~/.config/neomutt/box/eth"
folder-hook $folder 'source ~/.config/neomutt/box/eth'

source "~/.config/neomutt/box/outlook"
folder-hook $folder 'source ~/.config/neomutt/box/outlook'
# }}}

# visual {{{
# scroll at boundaries, NOT jump-page
set menu_scroll = yes
# number of context-lines when scrolling
set menu_context = 2

# automatically load stats at startup
set mail_check_stats = yes

set date_format = "%Y.%b.%d-%T"

# sidebar {{{
set sidebar_visible = yes
set sidebar_new_mail_only = no
set sidebar_width = 29
set sidebar_divider_char = '|'

set sidebar_format = " %D %* %?N?%N&-?/%S "
# }}}

# index {{{
set index_format = " \
%03C  [%Z]   %-59.59s     %-39.39L \
%* \
%4cr  %{$date_format} \
"

set status_chars = " +xA"
set status_format = " \
%D = (#%m, ~%l) \
%* \
%r (N:%n, O:%o)->[D:%d, F:%F, T:%t, P:%p]  %P \
"

set use_threads = "threads"
# newer threads are higher
set sort = reverse-last-date
# newer messages of a thread are lower
set sort_aux = date
# }}}
# }}}

# read {{{
auto_view text/plain text/html

alternative_order text/plain text/* image/*
# }}}

# send {{{
set editor = "nvim"

# do NOT prompt for recipient & subject; edit together with message instead
set auto_edit = yes
set edit_headers = yes
# }}}

# binds {{{
unbind *
unmacro *

# editor (command-line) {{{
bind editor <Tab> complete
bind editor \cp history-up
bind editor \cn history-down

bind editor \ch backward-char
bind editor \cl forward-char
bind editor \cb backward-word
bind editor \cf forward-word
bind editor \ca bol
bind editor \ce eol

bind editor <Backspace> backspace
bind editor <Delete> delete-char
bind editor \cw kill-word
bind editor \cd kill-eow
bind editor \cj kill-line
bind editor \ck kill-eol
# }}}

# pager {{{
bind pager k previous-line
bind pager j next-line
macro pager K kkkk "4k"
macro pager J jjjj "4j"
macro pager u KKKK "16k"
macro pager d JJJJ "16j"
bind pager g top
bind pager G bottom

bind pager h previous-entry
bind pager l next-entry
bind pager H previous-thread
bind pager L next-thread

macro pager : "<enter-command>exec " "exec: command"
bind pager ! shell-escape
bind pager / search
bind pager n search-next
bind pager N search-opposite

bind pager aa view-attachments
bind pager at view-raw-message
bind pager ae edit-type

bind pager q exit
# }}}

# menu-like {{{
# generic {{{
bind generic l select-entry
bind generic <Enter> select-entry
bind generic <Return> select-entry

bind generic k previous-entry
bind generic j next-entry
macro generic K kkkk "4k"
macro generic J jjjj "4j"
macro generic u KKKK "16k"
macro generic d JJJJ "16j"
bind generic g first-entry
bind generic G last-entry

macro generic : "<enter-command>exec " "exec: command"
bind generic ! shell-escape
bind generic / search
bind generic n search-next
bind generic N search-opposite

bind generic q exit
# }}}

# index {{{
macro index cd "<change-folder>?" "change-box"
bind index <Enter> sidebar-open
bind index <Return> sidebar-open
bind index \cp sidebar-prev
bind index \cn sidebar-next
macro index \ck "\cp\cp\cp\cp" "box-kkkk"
macro index \cj "\cn\cn\cn\cn" "box-jjjj"

# must escape semi-colon
bind index \; limit

bind index mm mail
bind index mb bounce-message
bind index mf forward-message
bind index mr reply

bind index l display-message

bind index za collapse-thread
bind index zA collapse-all
bind index H previous-thread
bind index L next-thread

bind index aa view-attachments
bind index at view-raw-message
bind index ae edit-type
# }}}

# attachment {{{
bind attach t view-text

bind attach l view-mailcap
bind attach <Enter> view-mailcap
bind attach <Return> view-mailcap

bind attach s save-entry
# }}}
# }}}
# }}}

# vim: filetype=neomuttrc foldmethod=marker
